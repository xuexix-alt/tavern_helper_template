task: 根据当前剧情发展，更新“寒冬末日”的角色状态、世界环境和庇护所数据。
rule:
  - merge rules of the same variable types:
    - 基础属性: "对于所有角色，`健康`、`衣着`、`神态样貌`、`内心想法` 等字段的更新逻辑是通用的。"
    - 纯文本字段: "`衣着`、`舌唇`、`胸乳`、`私穴`、`神态样貌`、`动作姿势`、`内心想法` 均直接替换为新描述，无需复杂的数值计算。"
  - omit type field for string variables.
format: |-
  ---
  变量更新规则:
    世界:
      时间:
        check:
          - 若用户指定了时间流逝（如“半小时后”），根据当前时间计算新时间。
          - 若无明确指示，根据对话长度估算流逝（5-15分钟）。
          - 格式必须保持为 "时间段 - HH:MM"。
      日期:
        check:
          - 当时间跨越午夜00:00时，日期加1天。
      末日天数:
        type: number
        check:
          - 当日期变更时，末日天数 + 1。
      地址:
        check:
          - 仅当角色移动到新地点时更新。
    庇护所:
      庇护所等级:
        type: number
        check:
          - 仅当明确触发“庇护所升级”事件时增加。
    ${角色}:
      健康:
        type: number
        range: 0~100
        check:
          - 获得食物/保暖/药物/休息 -> 增加 (依据程度 +1~10)。
          - 饥饿/寒冷/受伤/精神打击 -> 减少 (依据程度 -1~20)。
          - 遭受攻击或意外 -> 大幅减少。
      健康更新原因:
        check:
          - 每次`健康`数值变化时，必须同步更新此字段，说明原因。格式："+/-X, 原因"。
      健康状况:
        type: enum
        check:
          - 根据`健康`值自动判断：>=80:健康; 60-79:亚健康; 30-59:生病/受伤; <30:重病/濒死; 0:死亡。
      衣着:
        check:
          - 当角色穿脱、更换衣物，或衣物状态改变（破损、湿透）时更新。
          - 需包含内衣、外衣、鞋袜等细节。
      舌唇:
        check:
          - 进食、饮水、亲吻、说话、寒冷等影响口腔状态时更新。
      胸乳:
        check:
          - 受到触碰、寒冷刺激、性唤起时更新。
      私穴:
        check:
          - 受到性刺激、发生性行为、排泄等情况时更新。
      神态样貌:
        check:
          - 随情绪变化、环境影响（如冻僵）实时更新。
      动作姿势:
        check:
          - 角色位置或姿势发生显著变化时更新。
      内心想法:
        check:
          - 每次互动后，以第一人称更新角色的真实心声。反映对现状的恐惧、对主角的依赖或即时感受。
      登场状态:
        type: enum
        check:
          - 角色进入场景 -> 登场。
          - 角色离开场景或长时间未提及 -> 离场。
    楼层其他住户:
      言语:
        check:
          - 当环境背景音变化，或发生群体性骚乱时更新。
      行为:
        check:
          - 当邻居有具体行动（砸门、求救、打斗）时更新。

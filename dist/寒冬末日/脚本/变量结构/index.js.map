{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/external var \"z\"","src://tavern_helper_template/src/寒冬末日/schema.ts","src://tavern_helper_template/src/寒冬末日/脚本/变量结构/index.ts"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = z;","import { z } from 'zod';\n\n// ---------------------\n// 1. 通用定义\n// ---------------------\n\n// 角色通用 Schema\nconst CharacterSchema = z\n  .object({\n    姓名: z.string().prefault(''),\n\n    // 关系系统\n    关系: z.enum(['拒绝', '交易', '顺从', '忠诚', '性奴']).optional(),\n    关系倾向: z.enum(['拒绝', '交易', '顺从', '忠诚', '性奴']).optional(),\n\n    // 健康系统\n    健康: z.coerce\n      .number()\n      .min(0)\n      .max(100)\n      .prefault(100)\n      .describe('范围0-100。记录健康数值。获得食物/温暖增加；受伤/饥饿/寒冷减少。'),\n    健康更新原因: z.string().prefault('').describe('记录健康值变化的原因和数值，格式：+/-X, 原因描述'),\n    健康状况: z\n      .enum(['健康', '亚健康', '生病/受伤', '重病/濒死', '无', '死亡'])\n      .prefault('健康')\n      .describe('>=80:健康; 60-79:亚健康; 30-59:生病/受伤; <30:重病/濒死'),\n\n    // 外貌与状态 (纯文本描述)\n    衣着: z.string().prefault('').describe('详细描述当前的衣着状态'),\n    舌唇: z.string().prefault('').describe('口腔、嘴唇的状态'),\n    胸乳: z.string().prefault('').describe('胸部的状态'),\n    私穴: z.string().prefault('').describe('私处的详细状态'),\n    神态样貌: z.string().prefault('').describe('面部表情和神态'),\n    动作姿势: z.string().prefault('').describe('身体姿态和动作'),\n\n    // 心理\n    内心想法: z.string().prefault('').describe('第一人称内心独白'),\n\n    // 系统控制\n    登场状态: z.enum(['登场', '离场']).prefault('离场').describe('值为\"登场\"时显示在UI。角色不出现时设为\"离场\"'),\n  })\n  .prefault({\n    姓名: '',\n    健康: 100,\n    健康更新原因: '',\n    健康状况: '健康',\n    衣着: '',\n    舌唇: '',\n    胸乳: '',\n    私穴: '',\n    神态样貌: '',\n    动作姿势: '',\n    内心想法: '',\n    登场状态: '离场',\n  });\n\n// 2. 世界环境\nconst WorldSchema = z\n  .object({\n    地址: z.string().prefault('').describe('当前所在的物理位置'),\n    日期: z.string().prefault('').describe('格式：末日纪元，XXXX年XX月XX日'),\n    时间: z.string().prefault('').describe('格式：时间段 - HH:MM'),\n    末日天数: z.coerce.number().prefault(0).describe('自\"永恒暴雪\"降临以来的总天数'),\n  })\n  .prefault({\n    地址: '',\n    日期: '',\n    时间: '',\n    末日天数: 0,\n  });\n\n// 3. 庇护所\nconst ShelterSchema = z\n  .object({\n    庇护所等级: z.coerce.number().max(10).prefault(1),\n    今日投掷点数: z.string().prefault('').describe('记录每日升级判定结果'),\n    距离上次升级: z.string().prefault('').describe('记录保底进度'),\n    庇护所能力: z\n      .array(\n        z.object({\n          name: z.string(),\n          desc: z.string(),\n        }),\n      )\n      .prefault([])\n      .describe('已激活的庇护所能力列表。请严格参照世界书条目<庇护所升级能力>添加新能力。'),\n    可扩展区域: z\n      .object({\n        医疗翼: z.string().prefault('未解锁').describe('等级3解锁'),\n        制造工坊: z.string().prefault('未解锁').describe('等级4解锁'),\n        载具格纳库: z.string().prefault('未解锁').describe('等级7解锁'),\n      })\n      .prefault({\n        医疗翼: '未解锁',\n        制造工坊: '未解锁',\n        载具格纳库: '未解锁',\n      })\n      .describe('记录庇护所可扩展区域的解锁状态'),\n  })\n  .prefault({\n    庇护所等级: 1,\n    今日投掷点数: '',\n    距离上次升级: '',\n    庇护所能力: [],\n    可扩展区域: {\n      医疗翼: '未解锁',\n      制造工坊: '未解锁',\n      载具格纳库: '未解锁',\n    },\n  });\n\n// 3.1 房间系统\nconst RoomSchema = z\n  .object({\n    玄关: z\n      .object({\n        临时客房A入住者: z.array(z.string()).prefault([]).describe('临时客房A入住者姓名列表'),\n        临时客房B入住者: z.array(z.string()).prefault([]).describe('临时客房B入住者姓名列表'),\n      })\n      .prefault({\n        临时客房A入住者: [],\n        临时客房B入住者: [],\n      })\n      .describe('玄关区域房间状态'),\n    核心区: z\n      .object({\n        主卧室使用者: z.array(z.string()).prefault([]).describe('主卧室使用者姓名列表'),\n        主浴室使用者: z.array(z.string()).prefault([]).describe('主浴室使用者姓名列表'),\n      })\n      .prefault({\n        主卧室使用者: [],\n        主浴室使用者: [],\n      })\n      .describe('核心区域房间状态'),\n    楼层房间: z\n      .object({\n        楼层20房间: z\n          .record(z.string(), z.object({ 入住者: z.array(z.string()) }).prefault({ 入住者: [] }))\n          .prefault({})\n          .describe('20层各房间状态，key为房间号'),\n        楼层19房间: z\n          .record(z.string(), z.object({ 入住者: z.array(z.string()) }).prefault({ 入住者: [] }))\n          .prefault({})\n          .describe('19层各房间状态，key为房间号'),\n      })\n      .prefault({\n        楼层20房间: {},\n        楼层19房间: {},\n      })\n      .describe('楼层房间状态'),\n  })\n  .prefault({\n    玄关: {\n      临时客房A入住者: [],\n      临时客房B入住者: [],\n    },\n    核心区: {\n      主卧室使用者: [],\n      主浴室使用者: [],\n    },\n    楼层房间: {\n      楼层20房间: {},\n      楼层19房间: {},\n    },\n  });\n\n// 4. 其他住户\nconst NeighborsSchema = z\n  .object({\n    言语: z.string().prefault('').describe('其他幸存者的总体言语状态'),\n    行为: z.string().prefault('').describe('其他幸存者的总体行为状态'),\n  })\n  .prefault({\n    言语: '',\n    行为: '',\n  });\n\n// 5. 主 Schema\n// ---------------------\nconst MissionSchema = z\n  .object({\n    当前阶段: z.string().prefault('阶段一：秩序的萌芽').describe('主线任务的当前阶段名称'),\n    阶段目标: z\n      .array(z.string())\n      .prefault(['肃清20、19、21层的敌对幸存者', '庇护至少3个核心女性角色或家庭', '完成一个公寓内部的情报碎片任务'])\n      .describe('当前阶段需要达成的目标列表'),\n    目标完成状态: z\n      .record(z.string(), z.boolean())\n      .prefault({\n        '0': false,\n        '1': false,\n        '2': false,\n      })\n      .describe('目标完成状态，key为索引字符串（0/1/2...），value为true表示完成'),\n    情报碎片: z\n      .record(\n        z.string(),\n        z\n          .object({\n            编号: z.string().prefault(''),\n            描述: z.string().prefault(''),\n            价值: z.string().prefault(''),\n            风险: z.string().prefault(''),\n            状态: z.enum(['未探索', '已探索', '已完成']).prefault('未探索'),\n          })\n          .prefault({\n            编号: '',\n            描述: '',\n            价值: '',\n            风险: '',\n            状态: '未探索',\n          }),\n      )\n      .prefault({})\n      .describe('已解锁的情报碎片'),\n  })\n  .prefault({\n    当前阶段: '阶段一：秩序的萌芽',\n    阶段目标: ['肃清20、19、21层的敌对幸存者', '庇护至少3个核心女性角色或家庭', '完成一个公寓内部的情报碎片任务'],\n    目标完成状态: {\n      '0': false,\n      '1': false,\n      '2': false,\n    },\n    情报碎片: {},\n  });\n\nexport const Schema = z.object({\n  世界: WorldSchema,\n  庇护所: ShelterSchema,\n  房间: RoomSchema,\n  主线任务: MissionSchema,\n\n  // 主要角色\n  浅见亚美: CharacterSchema,\n  相田哲也: CharacterSchema,\n  星野琉璃: CharacterSchema,\n  早川遥: CharacterSchema,\n  早川舞: CharacterSchema,\n  藤井雪乃: CharacterSchema,\n  中村惠子: CharacterSchema,\n  爱宫心爱: CharacterSchema,\n  爱宫铃: CharacterSchema,\n  '桃乐丝・泽巴哈': CharacterSchema,\n  何铃: CharacterSchema,\n  王静: CharacterSchema,\n  康绮月: CharacterSchema,\n  薛萍: CharacterSchema,\n  小泽花: CharacterSchema,\n\n  // 动态 NPC (Optional)\n  临时NPC: CharacterSchema.optional().describe('当有临时NPC登场时使用，离场时设为undefined或重置'),\n\n  楼层其他住户: NeighborsSchema,\n});\n\nexport type Schema = z.output<typeof Schema>;\n","import { registerMvuSchema } from 'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist/util/mvu_zod.js';\nimport { Schema } from '../../schema';\n\n$(() => {\n  registerMvuSchema(Schema);\n});\n"],"names":["z","CharacterSchema","object","string","prefault","enum","optional","coerce","number","min","max","describe","WorldSchema","ShelterSchema","array","name","desc","RoomSchema","record","NeighborsSchema","MissionSchema","boolean","Schema","$"],"ignoreList":[],"sourceRoot":""}